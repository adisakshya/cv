name: PDF Gneration
run-name: Generating PDF Document
on: [push]

permissions: 
  contents: write

jobs:
  Build-PDF:
    runs-on: ubuntu-latest
    steps:
      - name: Start
        run: |
          echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"
          echo "üîé The name of branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Checkout
        uses: actions/checkout@v3
      - name: List files in the repository
        run: |
          ls ${{ github.workspace }}
      - name: Build Environment Setup
        run: |
          sudo apt-get -qq update
          sudo apt-get install -y texlive-full
          echo "Installaion of required packages complete"
      - name: Generate PDF
        run: |
          cd src
          mkdir _build
          ls -la
          xelatex cv.tex \cv
          ls -la
          if [ ! -f "cv.pdf" ]; then echo "CV PDF not found"; exit 1; fi
          cp cv.pdf _build/Adisakshya_Chauhan_CV.pdf 
          echo "üçè This job's status is ${{ job.status }}."
      - name: Deploy to GitHub Pages
        uses: crazy-max/ghaction-github-pages@v4
        with:
          target_branch: gh-pages
          build_dir: _build
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
